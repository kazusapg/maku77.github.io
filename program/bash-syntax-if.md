---
title: Bash の if-else 構文
created: 2007-05-08
---

```bash
if 条件1
then
   処理1
elif 条件2
   処理2
else
   処理3
fi
```

一行で記述する場合は、下記のようにセミコロンを使用します。

```bash
if 条件; then 処理1; fi
```

```then``` だけを最初の行に書いてあるスクリプトもよく見かけます。

```bash
if 条件; then
    処理1
fi
```

if の条件部では、```test``` コマンドを使用して、数値比較や文字列比較を行うことができます。
実際には、```test``` コマンドへのシンボリックリンクである、```[``` を使って記述するのが一般的です。
例えば、下記では数値比較を行うために ```test``` コマンドを使っていますが、

```bash
if test 1 -gt 0; then echo 'OK'; fi
```

これは次のように書くことができます。

```bash
if [ 1 -gt 0 ]; then echo 'OK'; fi
```

```[``` は単に ```test``` コマンドのエイリアスなので、```[``` の後ろには必ず 1 つ以上のスペースが必要です（上記では 1 がパラメータ扱い）。
```[``` で使用できる ```-eq``` や ```-gt``` などのオプションは、```man test``` とすれば調べることができます。

test コマンドの例
====

```test``` コマンドのオプション指定により、様々な判定を行うことができます。

* ```-z``` -- 文字列の長さが 0 なら True
* ```-f``` -- 指定したファイルが存在するなら True

#### 例: 環境変数 $HOGE が空かどうかを調べる
```bash
if [ -z "$HOGE" ]; then
    ...
fi
```

#### 例: $HOME/.vimrc というファイルが存在するか調べる
```bash
if [ -f $HOME/.vimrc ]; then
    ...
fi
```
