---
title: リバースプロキシ経由で Express サーバにアクセスしたときのクライアントのアドレスを取得する
created: 2014-03-09
---

クライアントが、リバースプロキシ経由で Node サーバにアクセスする場合、`req.ip` で取得できる IP アドレスは、リバースプロキシのアドレスになってしまいます。
これを防ぐには、`Application` オブジェクトで、以下のように設定します。
この機能を使用する場合、リバースプロキシが `x-forwarded-for` ヘッダをサポートしている必要があります。

```javascript
app.set('trust proxy', true);
```

